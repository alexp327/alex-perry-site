services:
  alex-site-app:
    image: alex-site-prod
    container_name: alex-nextjs-prod
    build:
      context: ./
      dockerfile: Dockerfile
    expose:
      - "3000"
    restart: unless-stopped
    networks:
      - web
    labels:
      - homepage.group=Apps
      - homepage.name=Alex Perry Site
      - homepage.icon=nextjs
      - homepage.href=http://alex-perry-site.local
    healthcheck:
      test: [ "CMD", "wget", "--spider", "-q", "http://localhost:3000" ]
      interval: 30s
      timeout: 5s
      retries: 3

networks:
  web:
    external: true
